

07.08 -3 bis 19.08


Unter Linux wird iptables verwendet.
→ iptables hat eine einfache und verständliche Konfiguration
→ iptables bedient sich der Paketfiltereigenschaften des Systemkerns (Kernel)
→ iptables hat 3 Tabellentypen (filter, nat, und mangle (manipulativ))


Auflisten der Tabellen (Regeln)
    # iptables ­t <Tabelle> ­L


Wobei die filter Tabelle standardmäßig auch mit

    # iptables ­L
angezeigt werden kann.


Entfernen von Regeln
Das leeren der gesamten Regelkette :
    # iptables [­t <Tabelle>] ­F

Das löschen einer einzelnen Regel :
    # iptables [­t <Tabelle>] ­D <Kette> <Regelnummer>

Einstellen von Regeln
    # iptables [­t <Tab>] ­A <Kette> [Option(en)] ­j <Aktion>
    # iptables [­t <Tab>] ­I <Kette> <Regelnummer> [Option(en)] ­j <Aktion>


  ===  Die wichtigsten iptables Parameter zur Tabellenverwaltung ===



-F löschen aller Regeln in einer oder allen Tabellen
    iptables -F                     => Löscht alle Filterregeln in allen Tabellen
    iptables -t nat -F              => Löscht alle NAT regeln in allen Tabellen
    iptables -F <Tabelle>           => Löscht alle Filterregeln in der Tabellen

-N erstellt eine neue Tabellen
    iptables -N <Tabelle>

--delete-chain löscht alle selbst erstellten Tabellen eines Tabellentyps
    iptables –delete-chain          => Löscht alle erstellten Filtertabellen
    iptables -t nat –delete-chain   => Löscht alle erstellten NAT Tabellen

-P setzt eine default Policy auf eine Tabelle ( DROP/ACCEPT )
    iptables -P <Tabelle> DROP

-A hängt eine Regel an eine Tabelle an
    iptables -A OUTPUT -o eth0 -j MASQUERADE

-D löscht eine Regel aus einer Tabelle
    iptables -D OUTPUT -o eth0 -j MASQUERADE

-L listet die Regeln der Tabellen auf
    iptables -L                     => Auflisten der Filterregeln aus allen Tabellentyps
    iptables -t nat -L              => Auflisten alle NAT Regeln aus allen Tabellen


=== Die wichtigsten iptables Parameter zur Regelerstellung ===

-o <eth> Paketrichtung festlegen. Output auf Netzwerkkarte
-i <eth> Paketrichtung festlegen. Input auf Netzwerkkarte
-p <Protokoll> Protokoll (bei icmp ist noch der Protokolltype mit –icmp-type an zu
    geben)
-s <IP> Paketquelle
-d <IP> Paketziel

--sport <Port> Quellport

--sports <Port,Port> mehrere Quellports oder eine Portrange ( benötigt mit -m das Modul
    multiport )
    iptables -A <Tabelle> -m multiport -p tcp –sports 80,443 -j <Ziel>
    iptables -A <Tabelle> -m multiport -p tcp –sports 20:25 -j <Ziel>

--dport <Port> Zielport

--dports <Port,Port> mehrere Zielports oder eine Portrange ( benötigt mit -m das Modul
    multiport )
    iptables -A <Tabelle> -m multiport -p tcp –dports 80,443 -j <Ziel>
    iptables -A <Tabelle> -m multiport -p tcp –dports 20:25 -j <Ziel>

--mac-source Festlegen der Quellmacadresse ( benötigt mit -m das Modul mac )
iptables -A <Tabelle> -m mac –mac-source <MAC> -j <Ziel>
