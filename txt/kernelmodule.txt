25.04

Modulverwaltung
wichtige Befehle
/sbin/lsmod             # Anzeigen der geladenen Module
/sbin/modinfo           # Zeigt Informationen über ausgewählte Module
/sbin/insmod            # Zuständig für das Laden eines Moduls
/sbin/rmmod             # Zuständig für das entladen eines Moduls
/sbin/modprobe          # Universalwerkzeug, basierend auf modules.dep
/sbin/depmod            # Zuständig für die Modulabhängigkeiten

Die Befehle
lsmod
                        formatierte Ausgabe von /proc/modules
                        Praktische Anwendung: meist in Kombination mit grep
                        (herausfiltern eines speziellen Moduls zur Kontrolle)
modinfo [option(en)] Modul
­a #                    zeigt den Autor
­p #                    zeigt die Parameter
­d #                    zeigt die Beschreibung
­l #                    zeigt die Lizenz (z.B. GPL)
­n #                    zeigt den Dateinamen

insmod /pfad/zum/Modul.ko
rmmod Modul
                        insmod und rmmod kümmern sich nicht um Abhängigkeiten.
                        Da diese hier manuell aufgelöst werden müssten, wird
                        modprobe im Allgemeinen bevorzugt.


modprobe [optionen] [Argument]
­l                      # verfügbare (nicht geladene!) Module anzeigen
­a                      # alle angegebenen Module laden
­i                      # laden eines Moduls (default / standard)
­r                      # entladen eines Moduls
­c                      # Anzeigen der Konfigurationsdatei
­f                      # laden eines Moduls auch ohne „versioning“ erzwingen.

Umgebungsvariable:MODPROBE_OPTIONS
depmod  -­a              # erstellt / aktualisiert die
                        # /lib/modules/<Kernelversion>/modules.dep


Die Modulkonfiguration
                        bis zum 2.4 Kernel noch über die /etc/modules.conf
                        in der Aliase / Parameter und Optionen übergeben werden.
Bsp:                    alias sblaster es1371 io=0x220 irq=5 dma=1
                        seit dem 2.6er Kernel läuft die Konfiguration über die
                        Datei /etc/modprobe.conf oder das Verzeichnis /etc/modprobe.d/

Weiterführend: u.a. man-pages
